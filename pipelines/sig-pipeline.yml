trigger: none
pr: none

variables:
  TF_VERSION: '1.11.2'
  IS_MAIN: ${{ eq(variables['Build.SourceBranch'], 'refs/heads/main') }}

  AGENT_POOL: "LZ-cn-xxxx-dev"
  SERVICE_CONNECTION: "lz-cn-spn-xxxx-image"

  RM_RG_NAME: 'rg-backend-xxxx-chinanorth3'
  RM_SA_NAME: "satfstatexxxx"
  RM_CONTAINER_NAME: 'state'
  RM_Key: "xxxx-image-backend.tfstate"

stages:
  - template: "templates/sig-infra.yml"
    parameters:
      pipelineName: "Share_Image_Builder"
      backendServiceArm: $(SERVICE_CONNECTION)
      backendAzureRmResourceGroupName: $(RM_RG_NAME)
      backendAzureRmStorageAccountName: $(RM_SA_NAME)
      backendAzureRmContainerName: $(RM_CONTAINER_NAME)
      backendAzureRmKey: $(RM_Key)